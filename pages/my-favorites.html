<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Favorites - UniMart</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Firebase SDKs (Compat version for script tag compatibility) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <!-- Firebase Config & Auth -->
    <script src="../js/firebase-config.js"></script>
    <script src="../js/firebase-auth.js"></script>

    <!-- Auth Guard -->
    <script>
        // Protect this page: redirect to login if not authenticated
        setTimeout(() => {
            try {
                firebase.auth().onAuthStateChanged((user) => {
                    if (!user) {
                        window.location.href = 'login.html';
                    }
                });
            } catch (error) {
                console.error('Firebase not initialized:', error);
                window.location.href = 'login.html';
            }
        }, 100);
    </script>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <div class="logo-placeholder">
                    <i class="fas fa-shopping-bag"></i>
                </div>
                <h1>UNIMART</h1>
            </div>

            <nav class="navigation">
                <h3>NAVIGATION</h3>
                <ul>
                    <li>
                        <a href="../index.html" class="nav-item">
                            <i class="fas fa-store"></i>
                            <span>Marketplace</span>
                        </a>
                    </li>
                    <li>
                        <a href="sell-item.html" class="nav-item">
                            <i class="fas fa-plus"></i>
                            <span>Sell Item</span>
                        </a>
                    </li>
                    <li>
                        <a href="my-orders.html" class="nav-item">
                            <i class="fas fa-boxes"></i>
                            <span>My Orders</span>
                        </a>
                    </li>
                    <li>
                        <a href="my-sales.html" class="nav-item">
                            <i class="fas fa-chart-line"></i>
                            <span>My Sales</span>
                        </a>
                    </li>
                    <li>
                        <a href="my-favorites.html" class="nav-item active">
                            <i class="fas fa-heart"></i>
                            <span>My Favorites</span>
                        </a>
                    </li>
                    <li>
                        <a href="user-guide.html" class="nav-item">
                            <i class="fas fa-question-circle"></i>
                            <span>User Guide</span>
                        </a>
                    </li>
                    <li>
                        <a href="feedback.html" class="nav-item">
                            <i class="fas fa-comment"></i>
                            <span>Feedback</span>
                        </a>
                    </li>
                    <li>
                        <a href="profile.html" class="nav-item">
                            <i class="fas fa-user"></i>
                            <span>Profile</span>
                        </a>
                    </li>
                </ul>
            </nav>

            <!-- User Profile / Login Section -->
            <div id="userSection">
                <!-- User Profile (shown when logged in) -->
                <div class="user-profile" id="userProfile" style="display: none;">
                    <div class="user-avatar">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <div class="user-info">
                        <h4 id="userName">User Name</h4>
                        <p id="userEmail">user@email.com</p>
                    </div>
                    <button class="btn-logout" onclick="handleSignOut()">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Sign Out</span>
                    </button>
                </div>

                <!-- Login Button (shown when not logged in) -->
                <button class="btn-login" id="loginBtn" onclick="window.location.href='login.html'">
                    <i class="fab fa-google"></i>
                    <span>Sign in with Google</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <div class="orders-header">
                <div class="orders-header-content">
                    <h1>My Favorites</h1>
                    <p>Your saved items</p>
                </div>
                <button class="btn-clear-favorites" id="clearFavoritesBtn">
                    <i class="fas fa-trash"></i>
                    <span>Clear All</span>
                </button>
            </div>

            <!-- Favorites Grid -->
            <div class="favorites-section">
                <div class="favorites-grid" id="favoritesGrid">
                    <!-- Favorites will be rendered here by JavaScript -->
                </div>
            </div>
        </main>
    </div>

    <script src="../js/user-sidebar.js"></script>
    <script src="../js/my-favorites.js"></script>
</body>
</html>
